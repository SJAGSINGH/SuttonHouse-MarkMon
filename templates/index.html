<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sutton House | Master Terminal</title>

    <!-- Socket.IO -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

    <style>
        :root {
            --bg:#050505; --card:#111; --text:#fff;
            --dim:#333; --lime:#32CD32; --gold:#BF953F;
            --silver:#C0C0C0; --pink:#FF69B4;
            --red:#ff4444; --orange:#ff8c00;
        }

        body {
            background:var(--bg); color:var(--text);
            font-family:Inter,system-ui,sans-serif;
            margin:0; padding:40px;
            display:flex; flex-direction:column; gap:40px;
        }

        /* HEADER */
        .header { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #222; padding-bottom:30px; }
        .logo-area { display:flex; align-items:center; gap:15px; }
        .logo-img { height:70px; }

        .gleam {
            font-weight:800; font-size:32px; letter-spacing:3px;
            background:linear-gradient(90deg,#BF953F,#FCF6BA,#AA771C);
            -webkit-background-clip:text; -webkit-text-fill-color:transparent;
        }

        .brand-bottom { font-size:11px; letter-spacing:2px; color:#aaa; }

        /* CLOCK */
        #digital-clock { font-size:52px; font-weight:700; text-align:right; }

        .city-grid { display:flex; gap:16px; justify-content:flex-end; margin-top:10px; }
        .city-item { font-size:10px; font-weight:700; cursor:pointer; display:flex; align-items:center; gap:6px; }
        .status-dot { width:6px; height:6px; border-radius:50%; background:#fff; }
        .city-open { color:var(--lime); }
        .city-open .status-dot { background:var(--lime); box-shadow:0 0 10px var(--lime); }
        .comms-flash { color:var(--pink) !important; }

        /* GRID */
        .grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }

        .card {
            background:var(--card);
            border:1px solid #1f1f1f;
            padding:30px; border-radius:8px;
            display:flex; flex-direction:column;
            transition:.6s;
        }

        .card h3 {
            font-size:10px; letter-spacing:2px;
            color:#666; margin:0 0 20px;
            text-transform:uppercase;
        }

        .primary-text { font-size:18px; font-weight:800; }
        .secondary-text { font-size:11px; margin-top:8px; letter-spacing:1px; }

        /* STATES */
        .halo-bg-gold { border-color:var(--gold); box-shadow:0 0 25px rgba(191,149,63,.2); }
        .halo-bg-silver { border-color:var(--silver); box-shadow:0 0 25px rgba(192,192,192,.2); }
        .glow-lime { border-color:var(--lime); }
        .glow-warning { border-color:var(--orange); }
        .glow-danger { border-color:var(--red); }

        /* PROGRESS */
        .track { height:4px; background:#222; margin-top:18px; display:none; }
        .fill { height:100%; width:0%; background:var(--gold); transition:1s; }

        /* RECESSION NODE */
        .pulse-node { width:55px; height:55px; border-radius:50%; margin:auto; }
        .pulse-slow { animation:pulse 3s infinite; }
        .pulse-mid { animation:pulse 1.2s infinite; }
        .pulse-fast { animation:pulse .5s infinite; }

        @keyframes pulse {
            0%{transform:scale(.9);opacity:.5}
            50%{transform:scale(1.1);opacity:1}
            100%{transform:scale(.9);opacity:.5}
        }

        /* MODAL */
        #password-modal {
            display:none; position:fixed; inset:0;
            background:rgba(0,0,0,.95);
            justify-content:center; align-items:center;
        }

        .modal-content {
            background:#111; padding:30px;
            border:1px solid var(--gold);
        }

        .modal-input {
            background:#000; color:#fff;
            border:1px solid #333;
            padding:10px; width:200px;
            text-align:center; letter-spacing:4px;
        }
    </style>
</head>

<body>

<header class="header">
    <div class="logo-area">
        <img src="/static/logo.png" class="logo-img">
        <div>
            <div class="gleam">SUTTON HOUSE</div>
            <div class="brand-bottom">MARKET MONITOR â€¢ TERMINAL ACTIVE</div>
        </div>
    </div>

    <div>
        <div id="digital-clock">00:00:00</div>
        <div class="city-grid">
            <div class="city-item" id="city-lon"><div class="status-dot"></div>LONDON</div>
            <div class="city-item" id="city-ny"><div class="status-dot"></div>NEW YORK</div>
            <div class="city-item" id="city-tor"><div class="status-dot"></div>TORONTO</div>
            <div class="city-item" id="city-syd"><div class="status-dot"></div>SYDNEY</div>
        </div>
    </div>
</header>

<main class="grid">

    <div class="card" id="card-1">
        <h3 id="h3-1">Regime & Volatility</h3>
        <div class="primary-text" id="val-1">AWAITING</div>
        <div class="secondary-text" id="sub-1"></div>
    </div>

    <div class="card" id="card-2">
        <h3 id="h3-2">Capital Rotation</h3>
        <div class="primary-text" id="val-2">AWAITING</div>
        <div class="secondary-text" id="sub-2"></div>
    </div>

    <div class="card" id="card-3">
        <h3 id="h3-3">Cycle Maturity</h3>
        <div class="primary-text" id="val-3">AWAITING</div>
        <div class="secondary-text" id="sub-3"></div>
        <div class="track" id="track-3"><div class="fill" id="fill-3"></div></div>
    </div>

    <div class="card" id="card-4">
        <h3>Recession Pulse</h3>
        <div class="pulse-node" id="led-node"></div>
        <div class="primary-text" id="val-4">AWAITING</div>
    </div>

</main>

<div id="password-modal">
    <div class="modal-content">
        <input type="password" id="pass-input" class="modal-input" placeholder="****">
        <br><br>
        <button onclick="checkPass()">VERIFY</button>
        <button onclick="closeModal()">ABORT</button>
    </div>
</div>

<script>
/* CLOCK */
function tick(){
    const n=new Date();
    digital-clock.innerText=n.toLocaleTimeString('en-GB',{hour12:false});
    const h=n.getUTCHours();
    const open=(id,v)=>document.getElementById(id).className=v?'city-item city-open':'city-item';
    open('city-lon',h>=8&&h<16);
    open('city-ny',h>=13&&h<21);
    open('city-tor',h>=13&&h<21);
    open('city-syd',h>=22||h<6);
}
setInterval(tick,1000); tick();

/* SOCKET SAFE */
let socket=null;
if(window.io){
    socket=io({transports:['polling','websocket']});
}

/* SECRET */
city-tor.addEventListener('dblclick',()=>{
    password-modal.style.display='flex';
    pass-input.focus();
});
function closeModal(){password-modal.style.display='none';pass-input.value='';}
async function checkPass(){
    const r=await fetch('/verify_secret',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password:pass-input.value})});
    closeModal();
    if(r.ok){
        h3-1.innerText='Institutional Alpha';
        h3-2.innerText='Order Flow';
        h3-3.innerText='Liquidity Timing';
    }
}
</script>

</body>
</html>
